(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["DamageCalculator"],{"0d03":function(e,t,a){var r=a("6eeb"),s=Date.prototype,n="Invalid Date",c="toString",i=s[c],l=s.getTime;new Date(NaN)+""!=n&&r(s,c,(function(){var e=l.call(this);return e===e?i.call(this):n}))},1170:function(e,t,a){"use strict";var r=a("7aae"),s=a.n(r);s.a},"1db3":function(e,t,a){},2532:function(e,t,a){"use strict";var r=a("23e7"),s=a("5a34"),n=a("1d80"),c=a("ab13");r({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~String(n(this)).indexOf(s(e),arguments.length>1?arguments[1]:void 0)}})},"25f0":function(e,t,a){"use strict";var r=a("6eeb"),s=a("825a"),n=a("d039"),c=a("ad6d"),i="toString",l=RegExp.prototype,o=l[i],u=n((function(){return"/a/b"!=o.call({source:"a",flags:"b"})})),d=o.name!=i;(u||d)&&r(RegExp.prototype,i,(function(){var e=s(this),t=String(e.source),a=e.flags,r=String(void 0===a&&e instanceof RegExp&&!("flags"in l)?c.call(e):a);return"/"+t+"/"+r}),{unsafe:!0})},"34d4":function(e,t,a){},"44e7":function(e,t,a){var r=a("861d"),s=a("c6b6"),n=a("b622"),c=n("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[c])?!!t:"RegExp"==s(e))}},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var r=a("1d80"),s=a("5899"),n="["+s+"]",c=RegExp("^"+n+n+"*"),i=RegExp(n+n+"*$"),l=function(e){return function(t){var a=String(r(t));return 1&e&&(a=a.replace(c,"")),2&e&&(a=a.replace(i,"")),a}};e.exports={start:l(1),end:l(2),trim:l(3)}},"5a34":function(e,t,a){var r=a("44e7");e.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},"7aae":function(e,t,a){},8283:function(e,t,a){},9367:function(e,t,a){"use strict";var r=a("8283"),s=a.n(r);s.a},"99af":function(e,t,a){"use strict";var r=a("23e7"),s=a("d039"),n=a("e8b5"),c=a("861d"),i=a("7b0b"),l=a("50c4"),o=a("8418"),u=a("65f0"),d=a("1dde"),f=a("b622"),h=a("60ae"),k=f("isConcatSpreadable"),p=9007199254740991,v="Maximum allowed index exceeded",g=h>=51||!s((function(){var e=[];return e[k]=!1,e.concat()[0]!==e})),m=d("concat"),b=function(e){if(!c(e))return!1;var t=e[k];return void 0!==t?!!t:n(e)},y=!g||!m;r({target:"Array",proto:!0,forced:y},{concat:function(e){var t,a,r,s,n,c=i(this),d=u(c,0),f=0;for(t=-1,r=arguments.length;t<r;t++)if(n=-1===t?c:arguments[t],b(n)){if(s=l(n.length),f+s>p)throw TypeError(v);for(a=0;a<s;a++,f++)a in n&&o(d,f,n[a])}else{if(f>=p)throw TypeError(v);o(d,f++,n)}return d.length=f,d}})},"9a3c":function(e,t,a){"use strict";var r=a("34d4"),s=a.n(r);s.a},a84c:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"damage-calculator-page"},[a("section",{staticClass:"tabs"},[e._l(e.calculators,(function(t,r){return a("div",{key:r,staticClass:"tab",class:{active:r===e.activeCalculator},on:{click:function(t){return e.setActiveCalculator(r)}}},[e._v(" "+e._s(e.calculatorTitle)+" ")])})),a("button",{staticClass:"add-tab",class:{disabled:e.calculators.length>=5},on:{click:e.addCalculator}},[e._v(" + ")])],2),e._l(e.calculators,(function(t,r){return a("DamageCalculator",{directives:[{name:"show",rawName:"v-show",value:r===e.activeCalculator,expression:"index === activeCalculator"}],key:r})})),a("PageFooter")],2)},s=[],n=(a("a4d3"),a("99af"),a("4de4"),a("4160"),a("b0c0"),a("e439"),a("dbb4"),a("b64b"),a("d3b7"),a("159b"),a("2fa7")),c=a("2f62"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"damage-calculator"},[a("section",{staticClass:"damage-calculator-body"},[a("section",{staticClass:"attacker"},[a("section",{staticClass:"header"},[a("h2",[e._v(e._s(e.$t("attacker")))]),a("button",{staticClass:"pick-creature-button attacker",on:{click:function(t){e.showAttackerModal=!0}}},[e._v(" "+e._s(e.$t("pick-creature"))+" ")])]),a("section",{staticClass:"unit-and-hero"},[a("div",{staticClass:"unit"},[a("button",{on:{click:function(t){e.showAttackerModal=!0}}},[0===Object.entries(e.attacker.creature).length?a("Portrait",{attrs:{path:"/images/creatures_portraits",file:"Archangel"}}):a("Portrait",{attrs:{path:"/images/creatures_portraits",file:e.attacker.creature.name_en}})],1),a("InputCreaturesCount",{directives:[{name:"show",rawName:"v-show",value:Object.entries(e.attacker.creature).length>0,expression:"Object.entries(attacker.creature).length > 0"}],attrs:{side:"attacker"}})],1),a("div",{staticClass:"hero"},[Object.entries(e.attacker.creature).length>0?a("SelectHero",{attrs:{heroes:e.data.heroes}}):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:Object.entries(e.attacker.creature).length>0,expression:"Object.entries(attacker.creature).length > 0"}],staticClass:"hero-params"},[a("InputHeroStat",{staticClass:"level",attrs:{stat:"level",side:"attacker"}}),a("InputHeroStat",{staticClass:"attack",attrs:{stat:"attack",side:"attacker"}}),a("InputHeroStat",{staticClass:"defense",attrs:{stat:"defense",side:"attacker"}})],1)],1)]),a("section",{directives:[{name:"show",rawName:"v-show",value:Object.entries(e.attacker.creature).length>0,expression:"Object.entries(attacker.creature).length > 0"}],staticClass:"hero-skills"},e._l(e.heroSkills,(function(t){return a("SelectSkill",{key:t,attrs:{skill:t},on:{click:function(a){return e.setHeroSkill({side:"attacker",skill:t,value:a})}}})})),1),a("section",{directives:[{name:"show",rawName:"v-show",value:Object.entries(e.attacker.creature).length>0,expression:"Object.entries(attacker.creature).length > 0"}],staticClass:"unit-effects"},[a("div",{staticClass:"attack-buffs"},e._l(e.unitsAttackPositiveEffects,(function(t){return a("InputUnitEffect",{key:t,attrs:{name:t},on:{click:function(a){a?e.addUnitEffect({side:"attacker",effect:t}):e.removeUnitEffect({side:"attacker",effect:t})}}})})),1),a("div",{staticClass:"defend-buffs"},e._l(e.unitsDefensePositiveEffects,(function(t){return a("InputUnitEffect",{key:t,attrs:{name:t},on:{click:function(a){a?e.addUnitEffect({side:"attacker",effect:t}):e.removeUnitEffect({side:"attacker",effect:t})}}})})),1),a("div",{staticClass:"attack-debuffs"},e._l(e.unitsAttackNegativeEffects,(function(t){return a("InputUnitEffect",{key:t,attrs:{name:t},on:{click:function(a){a?e.addUnitEffect({side:"attacker",effect:t}):e.removeUnitEffect({side:"attacker",effect:t})}}})})),1)]),a("section",{directives:[{name:"show",rawName:"v-show",value:Object.entries(e.attacker.creature).length>0,expression:"Object.entries(attacker.creature).length > 0"}],staticClass:"total-damage"},[a("span",[e._v("Damage: "+e._s(e.attacker.totalDamage))]),a("span",[e._v("Kills: "+e._s(e.attacker.totalKills))])])]),a("section",{staticClass:"defender"},[a("section",{staticClass:"header"},[a("button",{staticClass:"pick-creature-button defender",on:{click:function(t){e.showDefenderModal=!0}}},[e._v(" "+e._s(e.$t("pick-creature"))+" ")]),a("h2",[e._v(e._s(e.$t("defender")))])]),a("section",{staticClass:"unit-and-hero"},[a("div",{staticClass:"hero"},[Object.entries(e.defender.creature).length>0?a("SelectHero",{attrs:{heroes:e.data.heroes}}):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:Object.entries(e.defender.creature).length>0,expression:"Object.entries(defender.creature).length > 0"}],staticClass:"hero-params"},[a("InputHeroStat",{staticClass:"level",attrs:{stat:"level",side:"defender"}}),a("InputHeroStat",{staticClass:"attack",attrs:{stat:"attack",side:"defender"}}),a("InputHeroStat",{staticClass:"defense",attrs:{stat:"defense",side:"defender"}})],1)],1),a("div",{staticClass:"unit"},[a("button",{on:{click:function(t){e.showAttackerModal=!0}}},[0===Object.entries(e.defender.creature).length?a("Portrait",{attrs:{path:"/images/creatures_portraits",file:"Archangel"}}):a("Portrait",{attrs:{path:"/images/creatures_portraits",file:e.defender.creature.name_en}})],1),Object.entries(e.defender.creature).length>0?a("InputCreaturesCount",{attrs:{side:"defender"}}):e._e()],1)]),a("section",{directives:[{name:"show",rawName:"v-show",value:Object.entries(e.defender.creature).length>0,expression:"Object.entries(defender.creature).length > 0"}],staticClass:"hero-skills"},e._l(e.heroSkills,(function(t){return a("SelectSkill",{key:t,attrs:{skill:t},on:{click:function(a){return e.setHeroSkill({side:"defender",skill:t,value:a})}}})})),1),a("section",{directives:[{name:"show",rawName:"v-show",value:Object.entries(e.defender.creature).length>0,expression:"Object.entries(defender.creature).length > 0"}],staticClass:"total-damage"},[a("span",[e._v("Damage: "+e._s(e.defender.totalDamage))]),a("span",[e._v("Kills: "+e._s(e.defender.totalKills))])])])]),a("section",{staticClass:"damage-calculator-footer"},[a("SelectTerrain",{staticClass:"select-terrain",attrs:{terrains:e.data.terrains}})],1),e.showAttackerModal?a("SelectUnitModal",{attrs:{showModal:e.showAttackerModal,creatures:e.data.creatures},on:{close:function(t){e.showAttackerModal=!1},select:function(t){return e.setActiveCreature({side:"attacker",creature:t})}}}):e._e(),e.showDefenderModal?a("SelectUnitModal",{attrs:{showModal:e.showDefenderModal,creatures:e.data.creatures},on:{close:function(t){e.showDefenderModal=!1},select:function(t){return e.setActiveCreature({side:"defender",creature:t})}}}):e._e()],1)},l=[],o=(a("caad"),a("d81d"),a("e25e"),a("2532"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.showModal?a("div",{staticClass:"select-unit-modal"},[a("div",{staticClass:"modal-header"}),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"header"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.search.text,expression:"search.text"}],attrs:{type:"text",placeholder:"Search creature"},domProps:{value:e.search.text},on:{input:[function(t){t.target.composing||e.$set(e.search,"text",t.target.value)},function(t){return e.searchUnit()}],keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.selectFirstFounded()}}}),a("button",{staticClass:"close-modal-button",on:{click:e.closeModal}},[e._v("×")])]),a("div",{staticClass:"units"},e._l(e.towns,(function(t,r){return a("section",{key:t,class:t+"-town"},e._l(14,(function(t){return a("button",{key:t},[a("Portrait",{attrs:{path:"/images/creatures_portraits",file:e.creatures[14*r+t-1].name_en,width:"58px",height:"64px"},on:{click:e.selectUnit}})],1)})),0)})),0)])]):e._e()}),u=[],d={components:{Portrait:function(){return a.e("chunk-2d224b1f").then(a.bind(null,"e0db"))}},props:{showModal:{value:Boolean,default:!1,required:!1},creatures:{value:Array,default:[],required:!1}},data:function(){return{search:{text:""},selected:{id:0,name:""},towns:["castle","rampart","tower","inferno","necropolis","dungeon","stronghold","fortress","conflux","cove"]}},methods:{searchUnit:function(){},selectFirstFounded:function(){},selectUnit:function(e){this.selected=this.creatures.filter((function(t){return t.name_en===e}))[0],this.$emit("select",this.selected),this.$emit("close")},closeModal:function(){this.$emit("close")}}},f=d,h=(a("ac65"),a("2877")),k=Object(h["a"])(f,o,u,!1,null,null,null),p=k.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"select-skill"},[a("span",[e._v(e._s(e.skill))]),a("div",{staticClass:"levels"},e._l(e.levels,(function(t,r){return a("button",{key:t,class:{active:e.selectedLevel===r+1},on:{click:function(t){return e.onClick(r+1)}}},[e._v(" "+e._s(t)+" ")])})),0),e._m(0)])},g=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"levels-select"},[a("select",[a("option",{attrs:{value:"value1"}},[e._v("Значение 1")])])])}],m={props:{skill:{value:String,default:"",required:!0}},data:function(){return{selectedLevel:0,levels:["Basic","Advanced","Expert"]}},methods:{onClick:function(e){e===this.selectedLevel?this.selectedLevel=0:this.selectedLevel=e,this.$emit("click",this.selectedLevel)}}},b=m,y=(a("9a3c"),Object(h["a"])(b,v,g,!1,null,null,null)),M=y.exports,C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"checkbox"},[a("input",{attrs:{type:"checkbox"},on:{click:e.onSelect}}),a("label",[e._v(e._s(e.name))])])},O=[],w={name:"InputUnitEffect",props:{name:{value:String,default:"",required:!1}},data:function(){return{selected:!1}},methods:{onSelect:function(){this.selected=!this.selected,this.$emit("select",this.selected)}}},D=w,x=(a("e82c"),Object(h["a"])(D,C,O,!1,null,"1387d58f",null)),S=x.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input-stat"},[a("span",{staticClass:"stat-name"},[e._v(e._s(e._f("capitalizeFirstChar")(e.stat)))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.statInput,expression:"statInput"}],attrs:{type:"number",min:"0",max:"99"},domProps:{value:e.statInput},on:{input:function(t){t.target.composing||(e.statInput=t.target.value)}}})])},_=[];a("fb6a"),a("0d03"),a("25f0");function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(a,!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var E={props:{side:{value:String,default:"",required:!0},stat:{value:String,default:"",required:!0}},computed:B({},Object(c["c"])({attacker:"calculator/attacker",defender:"calculator/defender"}),{statInput:{get:function(){return parseInt(this[this.side].hero.stats[this.stat])},set:function(e){return(e<0||e>99)&&(e=0),e=parseInt(e),this.setHeroStat({side:this.side,stat:this.stat,value:e})}}}),methods:B({},Object(c["b"])({setHeroStat:"calculator/setHeroStat"})),filters:{capitalizeFirstChar:function(e){return e?(e=e.toString(),e.charAt(0).toUpperCase()+e.slice(1)):""}}},A=E,$=(a("1170"),Object(h["a"])(A,j,_,!1,null,"be919fbc",null)),I=$.exports,H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("input",{directives:[{name:"model",rawName:"v-model",value:e.count,expression:"count"}],attrs:{type:"number",min:"0",max:"9999"},domProps:{value:e.count},on:{input:function(t){t.target.composing||(e.count=t.target.value)}}})},U=[];function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(a,!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var F={props:{side:{value:String,default:"",required:!0,validator:function(e){return e.toLowerCase()}}},computed:T({},Object(c["c"])({attacker:"calculator/attacker",defender:"calculator/defender"}),{count:{get:function(){return parseInt(this[this.side].creature.count)},set:function(e){return(e<0||e>99)&&(e=0),e=parseInt(e),this.setCreaturesCount({side:this.side,count:e})}}}),methods:T({},Object(c["b"])({setCreaturesCount:"calculator/setCreaturesCount"}))},K=F,R=(a("e39e"),Object(h["a"])(K,H,U,!1,null,null,null)),q=R.exports;function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(a,!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var z={components:{SelectUnitModal:p,SelectSkill:M,InputUnitEffect:S,InputHeroStat:I,SelectHero:function(){return Promise.all([a.e("chunk-43aae3e0"),a.e("chunk-477f4758")]).then(a.bind(null,"0eab"))},Portrait:function(){return a.e("chunk-2d224b1f").then(a.bind(null,"e0db"))},SelectTerrain:function(){return Promise.all([a.e("chunk-43aae3e0"),a.e("chunk-5b569c45")]).then(a.bind(null,"0e1f"))},InputCreaturesCount:q},data:function(){return{showAttackerModal:!1,showDefenderModal:!1,unitsAttackPositiveEffects:["Bless","Bloodlust","Frenzy","Prayer","Precision","Slayer"],unitsDefensePositiveEffects:["Shield","Stone Skin","Air Shield"],unitsAttackNegativeEffects:["Curse","Weakness","Disrupting Ray"],heroSkills:["Offense","Air","Armorer","Fire","Archery","Earth","Artillery","Water"]}},computed:W({},Object(c["c"])({activeCalculator:"calculator/activeCalculator",attacker:"calculator/attacker",defender:"calculator/defender",options:"calculator/options",data:"data/data"})),methods:W({},Object(c["b"])({addCreature:"calculator/addCreature",setHeroAttack:"calculator/setHeroAttack",setCreaturesCount:"calculator/setCreaturesCount",setActiveCreature:"calculator/setActiveCreature"}),{calculate:function(){var e,t,a,r,s,n=this,c=0;if(this.attacker.creature.map((function(t){if(t=n.calculateCurseModificator(t),t=n.calculateStatsModification(t),t=n.calculateStatsModification(t),t=n.calculateTotalDamagesModification(t),t=n.calculateWithHates(t),t=n.calculateArtillery(t),t=n.unitsFeatures(t),t.attack>n.defender.defense){var a=Math.abs(.05*(t.attack-n.defender.defense));a>3&&(a=3),e=Math.abs(t.baseMinDamage*((1+a+n.attacker.damageBonus)*(1-n.defender.defenseBonus)*(1-n.defender.defenseMagicBonus))),n.attacker.totalMaxDamage=Math.abs(n.attacker.baseMaxDamage*((1+a+n.attacker.damageBonus)*(1-n.defender.defenseBonus)*(1-n.defender.defenseMagicBonus)))}else if(t.attack===n.defender.defense)n.attacker.totalMinDamage=Math.abs(n.attacker.baseMinDamage*((1+n.attacker.damageBonus)*(1-n.defender.defenseBonus)*(1-n.defender.defenseMagicBonus))),n.attacker.totalMaxDamage=Math.abs(n.attacker.baseMaxDamage*((1+n.attacker.damageBonus)*(1-n.defender.defenseBonus)*(1-n.defender.defenseMagicBonus)));else if(t.attack<n.defender.defense){var r=Math.abs(.025*(n.defender.defense-t.attack));r>.7&&(r=.7),n.attacker.totalMinDamage=Math.abs(n.attacker.baseMinDamage*((1+n.attacker.damageBonus)*(1-r)*(1-n.defender.defenseBonus)*(1-n.defender.defenseMagicBonus))),n.attacker.totalMaxDamage=Math.abs(n.attacker.baseMaxDamage*((1+n.attacker.damageBonus)*(1-r)*(1-n.defender.defenseBonus)*(1-n.defender.defenseMagicBonus)))}n.attacker.totalMinDamage*=t.count,n.attacker.totalMaxDamage*=t.count})),this.defender.attack>this.attacker.defense){var i=.05*(this.defender.attack-this.attacker.defense);i>3&&(i=3),this.defender.totalMinDamage=Math.abs(this.defender.baseMinDamage*((1+i+this.defender.damageBonus)*(1-this.attacker.defenseBonus)*(1-this.attacker.defenseMagicBonus))),this.defender.totalMaxDamage=Math.abs(this.defender.baseMaxDamage*((1+i+this.defender.damageBonus)*(1-this.attacker.defenseBonus)*(1-this.attacker.defenseMagicBonus)))}else if(this.defender.attack===this.attacker.defense)this.defender.totalMinDamage=Math.abs(this.attacker.baseMinDamage*((1+this.defender.damageBonus)*(1-this.attacker.defenseBonus)*(1-this.attacker.defenseMagicBonus))),this.defender.totalMaxDamage=Math.abs(this.attacker.baseMaxDamage*((1+this.defender.damageBonus)*(1-this.attacker.defenseBonus)*(1-this.attacker.defenseMagicBonus)));else if(this.defender.attack<this.attacker.defense){var l=.025*(this.attacker.defense-this.defender.attack);l>.7&&(l=.7),this.defender.totalMinDamage=Math.abs(this.defender.baseMinDamage*((1+this.defender.damageBonus)*(1-l)*(1-this.attacker.defenseBonus)*(1-this.attacker.defenseMagicBonus))),this.defender.totalMaxDamage=Math.abs(this.defender.baseMaxDamage*((1+this.defender.damageBonus)*(1-l)*(1-this.attacker.defenseBonus)*(1-this.attacker.defenseMagicBonus)))}this.defender.totalMinDamage*=this.$store.state.calculator.defender.unit.count,this.defender.totalMaxDamage*=this.$store.state.calculator.defender.unit.count,e=Math.floor(e),a=Math.floor(a),t=Math.floor(e+a)/2,r=Math.floor(e/this.$store.state.calculator.defender.unit.stats.health),c=Math.floor(a/this.$store.state.calculator.defender.unit.stats.health),s=Math.floor(t/this.$store.state.calculator.defender.unit.stats.health),this.setAttackerDamage({minDamage:e,averageDamage:t,maxDamage:a,minKills:r,averageKills:s,maxKills:c}),this.setDefenderDamage({minDamage:e,averageDamage:t,maxDamage:a,minKills:r,averageKills:s,maxKills:c})},calculateStatsModification:function(e,t){if(e.attack+=parseInt(t.attack),e.nativeTerrain===this.calculator.terrain&&(e.attack++,e.defense++),t.specialtyUnit&&t.specialtyUnit.includes(e.id)&&(e.attack,e.defense*=1+t.stats.level/e.level*.05,e.attack=Math.ceil(e.attack),e.defense=Math.ceil(e.defense)),e.effects.length>0){if(e.effects.includes("Bloodlust")&&("bloodlust"===t.specialtySpell&&(e.level<=2?e.attack+=3:e.level<=4?e.attack+=2:e.level<=6&&(e.attack+=1)),t.skills.fire<=1?e.attack+=3:t.skills.fire>=2&&(e.attack+=6)),e.effects.includes("Frenzy")&&(t.skills.fire<=1?e.attack+=e.defense:2===t.skills.fire?e.attack+=1.5*e.defense:3===this.$store.state.calculator.attacker.hero.fire&&(e.attack+=2*e.defense),e.defense=0),e.effects.includes("Slayer")){var a=[26,27,54,55,68,69,96,97,110,111,137,138,139,140];2===t.skills.fire?a.push(12,13,82,83):3===t.skills.fire&&a.push(40,41,124,125,154,155),a.includes(this.defender.creature.id)&&(e.attack+=8)}e.effects.includes("Prayer")&&("Prayer"===t.specialtySpell&&(e.level<=2?(e.attack,e.defense+=3):e.level<=4?(e.attack,e.defense+=2):e.level<=6&&(e.attack,e.defense+=1)),t.skills.water<=1?(e.attack,e.defense+=2):t.skills.water>=2&&(e.attack,e.defense+=4)),e.effects.includes("Precision")&&e.ranged&&("Precision"===t.skills.specialtySpell&&(e.level<=2?e.attack+=3:e.level<=4?e.attack+=2:e.level<=6&&(e.attack+=1)),t.skills.air<=1?e.attack+=3:t.skills.air>=2&&(e.attack+=6)),e.effects.includes("Stone Skin")&&("Stone Skin"===t.specialtySpell&&(e.level<=2?e.defense+=3:e.level<=4?e.defense+=2:e.level<=6&&(e.defense+=1)),t.skills.earth<=1?e.defense+=3:t.skills.earth>=2&&(e.defense+=6)),e.effects.includes("Weakness")&&("weakness"===t.specialtySpell&&(e.level<=2?e.attack-=3:e.level<=4?e.attack-=2:e.level<=6&&(e.attack-=1)),this.defender.hero.skills.water<=1?e.attack-=3:this.defender.hero.skills.water>=2&&(e.attack-=6)),e.effects.includes("Disrupting Ray")&&("Disrupting Ray"===this.defender.hero.specialtySpell&&(e.defense-=2),this.defender.hero.skills.air<=1?e.defense-=3:2===this.defender.hero.skills.air?e.defense-=4:3===this.defender.hero.skills.air&&(e.defense-=5))}},calculateBlessModificator:function(e,t){return e.effects.includes("Bless")&&("bless"===t.specialtySpell&&(e.damageBonus+=.03*t.stats.level/e.level),t.skills.water<=1?e.baseMinDamage=e.baseMaxDamage:t.skills.water>=2&&(e.baseMinDamage=e.baseMaxDamage+1,e.baseMaxDamage++)),e},calculateCurseModificator:function(e,t){return e.effects.includes("Curse")&&(t.skills.fire<=1?e.baseMaxDamage=e.baseMinDamage:t.skills.fire>=2&&(e.baseMinDamage=.8*e.baseMinDamage-1,e.baseMaxDamage=e.baseMinDamage)),e},calculateTotalDamagesModification:function(e,t){var a,r,s,n=0;if(t.id&&(a=1+.05*t.stats.level),t.skills.offense>0&&!e.ranged){var c=.1*t.skills.offense;"offense"===t.specialtySkill&&(c*=a,c>1.92&&(c=1.92)),r+=c}if(t.skills.armorer>0){var i=.05*t.skills.armorer;"armorer"===t.specialtySkill&&(i*=a,i>.7&&(i=.7)),s+=i}if(t.skills.archery>0&&e.ranged){var l=0;1===t.skills.archery?l=.1:2===t.skills.archery?l=.25:3===t.skills.archery&&(l=.5),"archery"===t.specialtySkill&&(l*=a,l>3.2&&(l=3.2)),r+=l}return t.skills.artillery>0&&(158===e.id||159===e.id)&&3===t.skills.artillery&&(e.baseMinDamage*=2,e.baseMaxDamage*=2),e.effects.includes("Shield")&&(t.skills.earth<=1?n+=.15:t.skills.earth>=2&&(n+=.3)),W({},e,{damageBonus:r,defenseBonus:s,defenseMagicBonus:n})},calculateWithHates:function(e){var t=this,a=this.data.hates.filter((function(e){return e.id===t.attacker.activeCreature.id||e.id===t.defender.activeCreature.id}));if(a.length>0)return e.damageBonus+=.5},calculateArtillery:function(e){158===e.id?(this.attacker.baseMinDamage+=2*(e.attack-e.stats.attack),this.attacker.baseMaxDamage+=3*(e.attack-e.stats.attack)):159===e.id&&(this.attacker.baseMinDamage+=4*(e.attack-e.stats.attack),this.attacker.baseMaxDamage+=7*(e.attack-e.stats.attack)),158===this.$store.state.calculator.defender.unit.id?(this.defender.baseMinDamage+=2*(this.defender.attack-this.$store.state.calculator.defender.unit.stats.attack),this.defender.baseMaxDamage+=3*(this.defender.attack-this.$store.state.calculator.defender.unit.stats.attack)):159===this.$store.state.calculator.defender.unit.id&&(this.defender.baseMinDamage+=4*(this.defender.attack-this.$store.state.calculator.defender.unit.stats.attack),this.defender.baseMaxDamage+=7*(this.defender.attack-this.$store.state.calculator.defender.unit.stats.attack))},unitsFeatures:function(e){switch(e.id){case 110:e.defense*=.6;break;case 111:e.defense*=.2;break;case 152:e.attack*=.7;break;case 153:e.attack*=.4;break}return e}})},J=z,X=(a("f51f"),Object(h["a"])(J,i,l,!1,null,"543b1ef8",null)),G=X.exports;function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(a,!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Y={components:{DamageCalculator:G,PageFooter:function(){return a.e("chunk-31bdd0fe").then(a.bind(null,"c8cc"))}},mounted:function(){this.getHeroes(),this.getCreatures(),this.getTerrains()},computed:V({},Object(c["c"])({calculators:"calculator/calculators",activeCalculator:"calculator/activeCalculator",attacker:"calculator/attacker",defender:"calculator/defender",options:"calculator/options"}),{calculatorTitle:function(){var e="";return this.attacker.hero.name&&e.concat(this.attacker.hero.name),this.attacker.creature.name&&e.concat(this.attacker.creature.name),0===e.length&&(e="Damage Calculator"),e}}),methods:V({},Object(c["b"])({getHeroes:"data/getHeroes",getCreatures:"data/getCreatures",getTerrains:"data/getTerrains",addCreature:"calculator/addCreature",setHeroAttack:"calculator/setHeroAttack",addCalculator:"calculator/addCalculator",setActiveCalculator:"calculator/setActiveCalculator"}))},Z=Y,ee=(a("9367"),Object(h["a"])(Z,r,s,!1,null,"1b4bd035",null));t["default"]=ee.exports},aa50:function(e,t,a){},ab13:function(e,t,a){var r=a("b622"),s=r("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[s]=!1,"/./"[e](t)}catch(r){}}return!1}},ac65:function(e,t,a){"use strict";var r=a("aa50"),s=a.n(r);s.a},b0c0:function(e,t,a){var r=a("83ab"),s=a("9bf2").f,n=Function.prototype,c=n.toString,i=/^\s*function ([^ (]*)/,l="name";!r||l in n||s(n,l,{configurable:!0,get:function(){try{return c.call(this).match(i)[1]}catch(e){return""}}})},bbe4:function(e,t,a){},caad:function(e,t,a){"use strict";var r=a("23e7"),s=a("4d64").includes,n=a("44d2");r({target:"Array",proto:!0},{includes:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),n("includes")},d81d:function(e,t,a){"use strict";var r=a("23e7"),s=a("b727").map,n=a("1dde");r({target:"Array",proto:!0,forced:!n("map")},{map:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})},e179:function(e,t,a){},e25e:function(e,t,a){var r=a("23e7"),s=a("e583");r({global:!0,forced:parseInt!=s},{parseInt:s})},e39e:function(e,t,a){"use strict";var r=a("bbe4"),s=a.n(r);s.a},e583:function(e,t,a){var r=a("da84"),s=a("58a8").trim,n=a("5899"),c=r.parseInt,i=/^[+-]?0[Xx]/,l=8!==c(n+"08")||22!==c(n+"0x16");e.exports=l?function(e,t){var a=s(String(e));return c(a,t>>>0||(i.test(a)?16:10))}:c},e82c:function(e,t,a){"use strict";var r=a("1db3"),s=a.n(r);s.a},f51f:function(e,t,a){"use strict";var r=a("e179"),s=a.n(r);s.a},fb6a:function(e,t,a){"use strict";var r=a("23e7"),s=a("861d"),n=a("e8b5"),c=a("23cb"),i=a("50c4"),l=a("fc6a"),o=a("8418"),u=a("1dde"),d=a("b622"),f=d("species"),h=[].slice,k=Math.max;r({target:"Array",proto:!0,forced:!u("slice")},{slice:function(e,t){var a,r,u,d=l(this),p=i(d.length),v=c(e,p),g=c(void 0===t?p:t,p);if(n(d)&&(a=d.constructor,"function"!=typeof a||a!==Array&&!n(a.prototype)?s(a)&&(a=a[f],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return h.call(d,v,g);for(r=new(void 0===a?Array:a)(k(g-v,0)),u=0;v<g;v++,u++)v in d&&o(r,u,d[v]);return r.length=u,r}})}}]);
//# sourceMappingURL=DamageCalculator.2cc2fcf1.js.map